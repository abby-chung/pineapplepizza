import{c as f,r as p,j as e,B as g,R as w,b as B,u as D,s as H,L as j,S as v}from"./index-B1ggCMGG.js";import{B as N}from"./badge-DN4YtRuQ.js";import{u as O,C as $,a as k,b as C,c as S}from"./seo-BrT7dVtK.js";import{b as A}from"./posts-CIJqba4h.js";import U from"./NotFound-_cFqrCWB.js";import{F as _}from"./file-text-CNyupU2l.js";import{C as F}from"./calendar-DD7EJSMW.js";import{C as J}from"./clock-BiVXsPAr.js";import"./coffee-GROd8IXa.js";import"./search-BMvZ6Nm1.js";const I=f("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const P=f("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const V=f("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const Z=f("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),W=({code:t,language:a="text",title:n,fileName:o})=>{const[r,l]=p.useState(!1),[s,i]=p.useState(t);p.useEffect(()=>{(()=>{let d=t;a==="javascript"||a==="typescript"?d=d.replace(/\b(const|let|var|function|return|if|else|for|while|class|extends|import|export|from|default)\b/g,'<span style="color: #0969da;">$1</span>').replace(/(["'`])((?:\\.|(?!\1)[^\\])*?)\1/g,'<span style="color: #032f62;">$1$2$1</span>').replace(/(\/\/.*$)/gm,'<span style="color: #6a737d;">$1</span>').replace(/\b(\d+)\b/g,'<span style="color: #005cc5;">$1</span>'):a==="css"?d=d.replace(/^([^{]*)\s*{/gm,'<span style="color: #6f42c1;">$1</span> {').replace(/\s+([a-z-]+):/g,'  <span style="color: #005cc5;">$1</span>:').replace(/:\s*([^;]+);/g,': <span style="color: #032f62;">$1</span>;'):a==="html"&&(d=d.replace(/(<\/?)([a-zA-Z][a-zA-Z0-9]*)(.*?)(\/?>)/g,'<span style="color: #22863a;">$1</span><span style="color: #22863a;">$2</span><span style="color: #6f42c1;">$3</span><span style="color: #22863a;">$4</span>').replace(/(\w+)=("[^"]*"|'[^']*')/g,'<span style="color: #6f42c1;">$1</span>=<span style="color: #032f62;">$2</span>')),i(d)})()},[t,a]);const c=async()=>{try{await navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3)}catch(x){console.error("Failed to copy text: ",x)}},m=()=>{switch(a){case"javascript":case"js":return"ðŸŸ¨";case"typescript":case"ts":return"ðŸ”·";case"css":return"ðŸŽ¨";case"html":return"ðŸŒ";case"json":return"ðŸ“‹";case"markdown":case"md":return"ðŸ“";default:return"ðŸ“„"}};return e.jsxs("div",{className:"relative group my-6 rounded-lg border border-border overflow-hidden bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:m()}),o&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:o})]}),n&&!o&&e.jsx("span",{className:"text-sm text-gray-700",children:n}),e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:a})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0 text-gray-500 hover:text-gray-700 hover:bg-gray-200 opacity-0 group-hover:opacity-100 transition-all",children:r?e.jsx(P,{className:"h-4 w-4 text-green-600"}):e.jsx(V,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"relative",children:e.jsx("pre",{className:"p-4 overflow-x-auto text-sm leading-relaxed bg-gray-50",children:e.jsx("code",{className:"font-mono text-gray-800",dangerouslySetInnerHTML:{__html:s}})})})]})},G=t=>({webp:`${/\.\w+$/.test(t)?t.substring(0,t.lastIndexOf(".")):t}.webp`,fallback:t}),Q=(t="#e5e7eb")=>{const a=`<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><rect fill="${t}" width="1" height="1"/></svg>`;return`data:image/svg+xml;base64,${btoa(a)}`};let h=null;const X=()=>{if(h!==null)return h;if(typeof document>"u")return h=!1,!1;const t=document.createElement("canvas");t.width=1,t.height=1;try{h=t.toDataURL("image/webp").indexOf("image/webp")===5||t.toDataURL("image/webp")==="data:image/webp;base64,UklGRjoIAABXRUJQVlA4IC4IAAAAAA8APwD+JZwJ"}catch{h=!1}return h},K=({src:t,alt:a,width:n,height:o,className:r="",placeholderColor:l="#e5e7eb",onLoad:s})=>{const[i,c]=p.useState(Q(l)),[m,x]=p.useState(!1),[d,T]=p.useState(!1),u=p.useRef(null);p.useEffect(()=>{if(!("IntersectionObserver"in window)){c(t);return}const R={root:null,rootMargin:"50px",threshold:0},y=new IntersectionObserver(M=>{M.forEach(b=>{if(b.isIntersecting&&u.current){const q=X()&&G(t).webp||t;c(q),y.unobserve(b.target)}})},R);return u.current&&y.observe(u.current),()=>{u.current&&y.unobserve(u.current)}},[t]);const z=()=>{x(!0),s?.()},L=()=>{T(!0),i!==t&&c(t)},E=n&&o?{aspectRatio:`${n} / ${o}`}:{};return e.jsxs("div",{className:`relative overflow-hidden ${r}`,style:E,children:[e.jsx("img",{ref:u,src:i,alt:a,width:n,height:o,onLoad:z,onError:L,className:`w-full h-full object-cover transition-opacity duration-300 ${m&&!d?"opacity-100":"opacity-50"}`,loading:"lazy"}),!m&&!d&&e.jsx("div",{className:"absolute inset-0 bg-muted animate-pulse"}),d&&e.jsx("div",{className:"absolute inset-0 bg-muted flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Image failed to load"})})]})},Y=({content:t})=>{const a=w.useRef(null);w.useEffect(()=>{a.current&&a.current.querySelectorAll("img.lazy-image").forEach(l=>{const s=l.getAttribute("data-lazy-image-alt")||"Image",i=l.getAttribute("data-lazy-image-src")||"",c=document.createElement("div");c.className="my-4 rounded-lg overflow-hidden",l.replaceWith(c),B.createRoot(c).render(e.jsx(K,{src:i,alt:s,className:"w-full h-auto rounded-lg"}))})},[t]);const n=r=>{const l=[];let s=0;const i=/```(\w+)?\s*\n?([\s\S]*?)```/g;let c;for(;(c=i.exec(r))!==null;){if(c.index>s){const d=r.slice(s,c.index);l.push(e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:o(d)}},`text-${s}`))}const m=c[1]||"text",x=c[2].trim();l.push(e.jsx(W,{code:x,language:m},`code-${c.index}`)),s=c.index+c[0].length}if(s<r.length){const m=r.slice(s);l.push(e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:o(m)}},`text-${s}`))}return l},o=r=>{let l=r.replace(/^### (.*$)/gm,"<h3>$1</h3>").replace(/^## (.*$)/gm,"<h2>$1</h2>").replace(/^# (.*$)/gm,"<h1>$1</h1>").replace(/^> (.*$)/gm,"<blockquote>$1</blockquote>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^- (.*$)/gm,"<li>$1</li>").replace(/!\[(.*?)\]\((.*?)\)/g,'<img data-lazy-image-alt="$1" data-lazy-image-src="$2" src="" alt="$1" class="lazy-image" />');return l=l.replace(/(<li>.*?<\/li>(?:\s*<li>.*?<\/li>)*)/gm,s=>s.includes("<ul>")?s:`<ul>${s}</ul>`),l=l.replace(/(<blockquote>.*?<\/blockquote>(?:\s*<blockquote>.*?<\/blockquote>)*)/gm,s=>s.replace(/<\/blockquote>\s*<blockquote>/g,"<br>")),l=l.replace(/\n\n/g,"</p><p>").replace(/^\s*/,"<p>").replace(/\s*$/,"</p>").replace(/<p><\/p>/g,"").replace(/<p>(<h[1-6]>)/g,"$1").replace(/(<\/h[1-6]>)<\/p>/g,"$1").replace(/<p>(<ul>)/g,"$1").replace(/(<\/ul>)<\/p>/g,"$1"),l};return e.jsx("div",{ref:a,className:"space-y-4",children:n(t)})},ee=({open:t,onClose:a,duration:n=2500,children:o})=>(p.useEffect(()=>{if(!t)return;const r=setTimeout(()=>a&&a(),n);return()=>clearTimeout(r)},[t,n,a]),t?e.jsx("div",{role:"status","aria-live":"polite",className:"fixed left-1/2 bottom-8 z-50 -translate-x-1/2 bg-primary text-primary-foreground px-4 py-2 rounded-md shadow-md text-sm",children:o}):null),se=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{try{const a=document.createElement("textarea");return a.value=t,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),!0}catch{return!1}}},me=()=>{const{slug:t}=D(),[a,n]=p.useState(!1),o=p.useCallback(async()=>{const s=H(window.location.href);await se(s)&&n(!0)},[]),r=A.find(s=>s.slug===t);if(!r)return e.jsx(U,{});O({title:r.title,description:r.excerpt,keywords:r.tags.join(", "),canonical:`https://abby-chung.github.io/pineapplepizza/blog/${r.slug}`,ogTitle:r.title,ogDescription:r.excerpt,ogType:"article",publishedDate:new Date(r.date).toISOString(),author:"Abby Chung"});const l=A.filter(s=>s.id!==r.id&&s.tags.some(i=>r.tags.includes(i))).slice(0,3);return e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8 fade-in",children:[e.jsx(g,{variant:"ghost",asChild:!0,className:"mb-4",children:e.jsxs(j,{to:"/blog",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Blog"]})}),e.jsxs("header",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(s=>e.jsx(N,{variant:"secondary",children:s},s))}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-foreground leading-tight",children:r.title}),e.jsxs("div",{className:"flex items-center gap-6 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:r.date})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:r.readTime})]}),e.jsxs(g,{variant:"ghost",size:"sm",className:"p-0 h-auto",onClick:o,"aria-label":"Share post",children:[e.jsx(Z,{className:"h-4 w-4"}),"Share"]})]})]}),e.jsx(v,{})]}),e.jsx("article",{className:"prose prose-lg max-w-none",children:e.jsx(Y,{content:r.content})}),e.jsx(v,{}),e.jsxs($,{children:[e.jsx(k,{children:e.jsx(C,{children:"About the Author"})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-lg font-semibold text-primary",children:r.author.split(" ").map(s=>s[0]).join("")})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:r.author}),e.jsx("p",{className:"text-muted-foreground",children:"Passionate about coffee, books, TV shows, movies, and the art of surviving in civilization. Always learning, always experimenting, and documenting the journey along the way."}),e.jsx("p",{className:"text-muted-foreground",children:"æœ‰æ™‚å€™å¤ªèªçœŸã€æœ‰æ™‚å€™ä¸è² è²¬ä»»ï¼Œå¸Œæœ›æ­¤è™•ä¸æœƒé›œè‰å¢ç”Ÿã€‚"})]})]})})]}),l.length>0&&e.jsxs("section",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Related Posts"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map(s=>e.jsxs($,{className:"hover:shadow-lg transition-shadow group",children:[e.jsx(k,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tags.slice(0,2).map(i=>e.jsx(N,{variant:"secondary",className:"text-xs",children:i},i))}),e.jsx(C,{className:"text-lg group-hover:text-primary transition-colors",children:e.jsx(j,{to:`/blog/${s.slug}`,children:s.title})})]})}),e.jsxs(S,{children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:s.excerpt}),e.jsxs("div",{className:"mt-3 text-xs text-muted-foreground",children:[s.date," â€¢ ",s.readTime]})]})]},s.id))})]}),e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx(g,{asChild:!0,children:e.jsxs(j,{to:"/blog",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to All Posts"]})})}),e.jsx(ee,{open:a,onClose:()=>n(!1),children:"Link copied to clipboard"})]})};export{me as default};
